<div layout="column" ng-controller="PropertyCtrl as prop" style="background:rgb(250,250,250)">
<md-toolbar flex="none" layout="row" layout-align="start center" class="main-toolbar">

    <md-button ng-show="$root.currentParcel.socrata" class="md-icon-button" ng-click="$root.openPage('m')" aria-label="Search">
      <md-icon md-font-icon="icon-map" alt="edit" ng-style="{'font-size':'24px'}"></md-icon>
    </md-button>
    <span flex-gt-xs="10"></span>
    <md-toolbar-title style="text-align:center">
      <p style="font-size: 0.6em;" style="color:#fff" ng-class="$root.subTitleClass" ng-bind-html="$root.subTitle"></p>
    </md-toolbar-title>
    <span flex></span>
    <md-button class="md-icon-button" ng-click="prop.addPicture($event)" aria-label="Search">
      <md-icon md-font-icon="icon-camera_enhance" alt="edit" ng-style="{'font-size':'24px'}"></md-icon>
    </md-button>
    <md-button class="md-icon-button" ng-click="prop.addNote($event)" aria-label="Search">
      <md-icon md-font-icon="icon-note_add" alt="edit" ng-style="{'font-size':'24px'}"></md-icon>
    </md-button>
    <md-menu>
      <md-button aria-label="Open phone interactions menu" class="md-icon-button" ng-click="ul.openMenu($mdOpenMenu, $event)">
        <md-icon md-menu-origin md-font-icon="icon-more-vert" ng-style="{'font-size': '24px', height: '40px'}"></md-icon>
      </md-button>
      <md-menu-content width="4">
        <!-- <md-menu-item ng-show="!$root.fireUser">
          <md-button ng-click="ul.registerUser($event)">
            <md-icon md-font-icon="icon-history" md-menu-align-target></md-icon>
            Register
          </md-button>
        </md-menu-item> -->
        <md-menu-item>
          <md-button ng-click="openStreet()">
            <md-icon md-font-icon="icon-streetview" md-menu-align-target></md-icon>
            Street View
          </md-button>
        </md-menu-item>
         <md-menu-item>
          <md-button ng-click="$root.openPage('home')">
            <md-icon md-font-icon="icon-search" md-menu-align-target></md-icon>
            Search
          </md-button>
        </md-menu-item>
        <!-- <md-menu-item>
          <md-button ng-click="ul.redial($event)">
            <md-icon md-font-icon="icon-history" md-menu-align-target></md-icon>
            Search History
          </md-button>
        </md-menu-item> -->
        <!-- <md-menu-item>
          <md-button ng-show="$root.fireUser" ng-click="ul.checkVoicemail()">
            <md-icon md-svg-icon="call:voicemail"></md-icon>
            My Notes
          </md-button>
        </md-menu-item> -->
        <md-menu-item>
          <md-button ng-click="ul.optionsMenu($event)">
            <md-icon md-font-icon="icon-settings"></md-icon>
            Settings
          </md-button>
        </md-menu-item>
        <md-menu-divider></md-menu-divider>
        <md-menu-item>
          <md-button ng-click="ul.fireInOut()">
            
            {{$root.fireUser ? 'Sign Out' : 'Sign In' }}
          </md-button>
        </md-menu-item>
      </md-menu-content>
    </md-menu>
  </md-toolbar>

<md-content>
  <md-progress-linear md-mode="indeterminate" ng-hide="$root.currentParcel.socrata"></md-progress-linear>


  <div layout-fill flex ng-cloak layout-align="end start" style="background:#fff">
  <md-content ng-show="$root.currentParcel.socrata" layout="row">
  <span flex-gt-sm="10"></span>
  <div flex class="md-whiteframe-3dp">
      <md-tabs md-dynamic-height md-border-bottom>
        <md-tab label="Detail">
          <md-content>
          
          <div flex hide-gt-xs flex-order-xs="-1" flex-gt-xs="50" layout="column">
            <img ng-src="{{$root.currentParcel.staticImageUrl}}" ng-click="showImageOptions($event)" class="full-width" />
            <!-- <iframe width="100%" height="240" scrolling="no" allowfullscreen
        src="./vrview/index.html?image=test.png&is_stereo=true&preview=test.png"></iframe> -->
          </div>
            <md-tabs class="md-accent md-hue-2 prop-detail" md-dynamic-height label="DetailTab">
            <md-tab label="Overview">

            <div class="md-padding property-content md-whiteframe-3dp" layout="row" layout-xs="column">
              <div layout="row">
                <span flex></span>
              <!-- <md-icon md-font-icon="icon-more_horiz" ng-style="{'font-size':'18px'}" alt="more-options"></md-icon> -->
                        
            </div>
              <div flex flex-gt-xs="50" layout="column" style="font-size: 0.9em;" class="md-padding">
                <md-content layout-margin class="md-whiteframe-1dp" style="background:#fff">
                <p><strong>Account Number:</strong><span style="float:right">{{$root.currentParcel.socrata[0].parcel_number}}</span>
                <br><strong>Full Address:</strong><span style="float:right">{{$root.currentParcel.socrata[0].location}} {{($root.currentParcel.socrata[0].unit != 0 ? 'Unit '+($root.currentParcel.socrata[0].unit | getUnit) : '')}}</span>
                <br><strong>Zip Code:</strong><span style="float:right">{{$root.currentParcel.socrata[0].zip_code}}</span>
              

                <br>

                <a ng-click="neighborhoodList(currentParcel.neighborhood.listname)"><strong>Neighborhood:</strong><span style="float:right">{{$root.currentParcel.neighborhood.listname}}</span></a>
                <br>
                <a ng-click="neighborhoodList(currentParcel.socrata[0].geographic_ward)"><strong>Ward:</strong><span style="float:right">{{$root.currentParcel.socrata[0].geographic_ward}}</span></a>
                <br><strong><small>Owners:</small></strong>
                <br>
                    <span style="">          
                      <md-button class="md-accent md-hue-2">{{$root.currentParcel.socrata[0].owner_1}}</md-button>
                    </span>
                    <span style="" ng-show="$root.currentParcel.socrata[0].owner_2">          
                      <md-button class="md-accent md-hue-2">{{$root.currentParcel.socrata[0].owner_2}}</md-button>
                    </span>
                    <br>
                    <md-button class="md-primary md-raised md-hue-2" ng-click="claimProperty($root.parcel_number)">
                      <md-icon md-font-icon="icon-check" ng-style="{'font-size':'24px'}" alt="more-options"></md-icon>
                      My Parcl
                    </md-button>
                    <md-button class="md-primary md-raised md-hue-1" ng-click="namePrice($root.parcel_number)">
                      <md-icon md-font-icon="icon-attach_money" ng-style="{'font-size':'24px'}" alt="more-options"></md-icon>
                      Name your Price
                    </md-button>
                </p>
                </md-content>
                <md-divider></md-divider>
                
                <md-divider></md-divider>
                <p><strong>Current Market Value:</strong> <md-button class="md-accent md-hue-2" ng-click="showOwnerMailingAddress($root.currentParcel.ownership.mailing_address)">${{($root.currentParcel.socrata[0].market_value | number:0)}} ({{$root.currentParcel.socrata[0].market_value_date | socratadate}})</md-button>

              </p>
                <p><strong>Last Sale Date:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].sale_date | socratadate}}</span></p>
               <p><strong>Last Sale Price:</strong> <span style="float:right;">${{$root.currentParcel.socrata[0].sale_price | number:2}}</span></p>
               <p><strong>Year Built:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].year_built}}</span></p>
                <p><strong>Description:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].building_code_description}}</span></p>
                <p><strong>Condition:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].exterior_condition | exteriorCondition}}</span></p>
                <p><strong>Zoning Code:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].zoning}}</span></p>
                <!-- <p><strong>Zoning Description:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].zoning_description}}</span></p> -->
                <p><strong>Land Area:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].total_area | number:0}} sqft</span></p>
                <p><strong>Livable Area:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].total_livable_area | number:0}} sqft</span></p>
                <p><strong>Frontage:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].frontage | number:0}} ft</span></p>
                <p><strong>Depth:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].depth | number:0}} ft</span></p>

                <p><strong>Improvement Description:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].category_code_description}}</span></p>
                <md-divider></md-divider>
                <p ng-show="$root.currentParcel.socrata[0].number_stories !='0'"><strong>Number of Stories:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].number_stories}}</span></p>
                <p ng-show="$root.currentParcel.socrata[0].number_of_bedrooms !='0'"><strong>Number of Bedrooms:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].number_of_bedrooms}}</span></p>
                <p ng-show="$root.currentParcel.socrata[0].number_of_rooms !='0'"><strong>Number of Rooms:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].number_of_rooms}}</span></p>
                <p ng-show="$root.currentParcel.socrata[0].number_of_bathrooms !='0'"><strong>Number of Bathrooms:</strong> <span style="float:right;">{{$root.currentParcel.socrata[0].number_of_bathrooms}}</span></p>
                <p ng-show="$root.currentParcel.socrata[0].garage_spaces !='0'"><strong>{{$root.currentParcel.socrata[0].garage_spaces}}</strong> Fireplaces</p>
                <p ng-show="$root.currentParcel.socrata[0].fireplaces !='0'"><strong>{{$root.currentParcel.socrata[0].fireplaces}}</strong> Garage Spaces</p>
              </div>
              <span flex-gt-sm="25"></span>

              <div flex flex-order-xs="-1" hide-xs flex-gt-xs="50" layout="column">
                <img ng-src="{{$root.currentParcel.staticImageUrl}}" class="full-width" />
              </div>

            </div>
            </md-tab>

        <md-tab label="L&I">
        <md-tabs class="md-accent md-hue-2" md-dynamic-height label="DetailTab">
          <md-tab label="Permits">
          <md-content class="md-padding">
          <h1 class="title">Permits</h1>
          <md-divider></md-divider>
          <md-list flex>
          <md-list-item class="md-3-line" ng-hide="item.disable" ng-repeat="item in $root.currentParcel.permits" ng-click="showPermit($event,item)">
            <div class="md-list-item-text" layout="column">
              <h3 style="">{{item.permitdescription}}</h3>
              <h4>{{item.permittype}} issued {{item.permitissuedate | socratadate}}</h4>
              <p>{{item.status}}</p>
            </div>
            <md-divider></md-divider>
          </md-list-item>

          </md-list>
          </md-content>
          </md-tab>

      <md-tab label="Violations">
        <md-content class="md-padding">
          <h1 class="title">Violations</h1>
          <md-divider></md-divider>
          <md-list flex>
          <md-list-item class="md-3-line" ng-hide="item.disable" ng-repeat="item in $root.currentParcel.violations" ng-click="showPermit($event,item)">
            <div class="md-list-item-text" layout="column">
              <h3 style="">{{item.violationdescription}}</h3>
              <h4>Case resolved on {{item.caseresolutiondate | socratadate}}</h4>
              <p>Status: {{item.status}}</p>
            </div>
            <md-divider></md-divider>
          </md-list-item>
          
        </md-list>
        </md-content>
      </md-tab>

      <md-tab label="Service Requests">
        <md-content class="md-padding">
          <h1 class="title">Service Requests</h1>
          <md-divider></md-divider>
          <md-list flex>
          <md-list-item class="md-3-line" ng-hide="item.disable" ng-repeat="item in $root.currentParcel.service_requests" ng-click="showPermit($event,item)">
            <div class="md-list-item-text" layout="column">
              <h3 style="">{{item.sr_problemdesc}}</h3>
              <h4>{{item.sr_resolutiondate | socratadate}}</h4>
              <p>Status: {{item.sr_resolutiondesc}}</p>
            </div>
            <md-divider></md-divider>
          </md-list-item>
          
        </md-list>
        </md-content>
      </md-tab>
    </md-tabs>
    </md-tab>


    <md-tab label="Debts">
          <md-content class="md-padding">

            <!-- Tax Table -->
            <md-toolbar class="md-table-toolbar md-default">
              <div class="md-toolbar-tools">
              <span>Taxes: ${{$root.currentParcel.totalTaxes | number:0}}</span>
              <span flex></span>
              
              </div>
            </md-toolbar>

            <md-table-container flex="100">
            <table class="md-primary" md-table>
              <thead md-head md-order="taxQuery.order" md-trigger="onOrderChange">
              <tr md-row>
                <th md-column name="tax_period">Tax Period</th>
                <th md-column name="principal">Principal</th>
                <th md-column name="interest">Interest</th>
                <th md-column name="penalty">Penalty</th>
                <th md-column name="total">Total</th>
              </tr>
              </thead>
              <tbody md-body>
                <tr md-row ng-repeat="tax in $root.currentParcel.taxes | orderBy: 'tax_period'">
                  <td md-cell>
                    {{tax.tax_period}}
                  </td>
                  <td md-cell>{{tax.principal | formatMoney}}</td>
                  <td md-cell>{{tax.interest | formatMoney}}</td>
                  <td md-cell>{{tax.penalty | formatMoney}}</td>
                  <td md-cell>{{tax.total | formatMoney}}</td>
                </tr>
              </tbody>
            </table>
            </md-table-container>
            <md-divider></md-divider>

            <md-toolbar class="md-table-toolbar md-default">
              <div class="md-toolbar-tools">
              <span>Water: ${{$root.currentParcel.totalWater | number:0}}</span>
              <span flex></span>
               
              </div>
            </md-toolbar>

            <md-table-container flex="100">
            <table class="md-primary" md-table>
              <thead md-head md-order="taxQuery.order" md-trigger="onOrderChange">
              <tr md-row>
                <th md-column name="tax_period">Date</th>
                <th md-column name="principal">Principal</th>
                <th md-column name="interest">Interest</th>
                <th md-column name="penalty">Penalty</th>
                <th md-column name="total">Total</th>
              </tr>
              </thead>
              <tbody md-body>
                <tr md-row ng-repeat="water in $root.currentParcel.waterBill | orderBy: 'water_period'">
                  <td md-cell>
                    {{water.date}}
                  </td>
                  <td md-cell>{{water.principal | formatMoney}}</td>
                  <td md-cell>{{water.interest | formatMoney}}</td>
                  <td md-cell>{{water.penalty | formatMoney}}</td>
                  <td md-cell>{{water.total | formatMoney}}</td>
                </tr>
              </tbody>
            </table>
            </md-table-container>
          </md-content>
        </md-tab>

        <md-tab label="Notes">
          <md-content class="md-padding">
          <md-content class="property-images" layout="column" ng-show="$root.currentParcel.images">
          <md-virtual-repeat-container id="horizontal-container" md-orient-horizontal>
            <div md-virtual-repeat="item in prop.items"
                class="repeated-item" flex>
              <img src="https://placeholdit.imgix.net/~text?txtsize=23&txt=310%C3%97150&w=100&h=150">
            </div>
          </md-virtual-repeat-container>
          </md-content>
          <h1 class="title">Notes</h1>
          <md-divider></md-divider>

          <div>
            <md-button class="md-icon-button" ng-click="addNotes($event)" aria-label="Notes">
            <md-tooltip md-direction="bottom">
              add a note
            </md-tooltip>
              <md-icon md-font-icon="icon-note-add" ng-style="{'font-size':'24px'}" alt="more-options"></md-icon>
            </md-button>
            <!-- <md-button class="md-icon-button" ng-click="takePicture($event)" aria-label="Picture">
            <md-tooltip md-direction="bottom">
              add a picture
            </md-tooltip>
              <md-icon md-font-icon="icon-photo-camera" ng-style="{'font-size':'24px'}" alt="more-options"></md-icon>
            </md-button> -->
          </div>
          <md-content class="md-padding" layout="column">
          <!-- <p>
          <a ng-href="https://slack.com/oauth/authorize?scope=channels:write,channels:read,chat:write:bot,channels:history&client_id=4983993771.46639829093&state=$root.uid"><img src="https://api.slack.com/img/sign_in_with_slack.png" /></a>
          </p> -->
          <div flex-xs flex-gt-xs="50" layout="column">
          <md-card ng-repeat="(index,item) in $root.currentParcel.notes">
      <md-card-title>
        <md-card-title-text>
          <span class="md-headline">{{item.note}}</span>
          <span class="md-subhead">Category: {{item.category.name}}</span>
          <span class="md-subhead" ng-if="item.timestamp">{{item.timestamp | formatTimeRelative}}</span>
        </md-card-title-text>
        <md-card-title-media>
          <div class="md-media-sm card-media">

          </div>
        </md-card-title-media>
      </md-card-title>
      <md-card-actions layout="row" layout-align="end center">
       <!--  <md-button class="md-icon-button" ng-click="ul.editNote($event,index)" aria-label="Edit Note">
            <md-icon md-font-icon="icon-edit" alt="edit" ng-style="{'font-size':'24px'}"></md-icon>
          </md-button>
        <md-button class="md-icon-button" ng-click="ul.trashNote($index,$event)" aria-label="Trashnote">
          <md-icon md-svg-icon="trash" alt="trash"></md-icon>
        </md-button> -->
        <!-- <md-button>Action 2</md-button> -->
      </md-card-actions>
      </md-card>
          </div>
          </md-content>
          </md-content>
        </md-tab>

        </md-tabs>
          </md-content>
        </md-tab>
           
   <md-tab label="Block">
     <div ng-hide="$root.currentParcel.block" ng-show layout-fill flex ng-cloak layout-align="center center">
      <div layout-fill flex layout="column" layout-align="center center">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
      </div>
    </div>
    <md-list ng-show="$root.currentParcel.block" ng-cloak style="min-width:320px">
    <md-subheader ng-cloak>Properties on this Block</md-subheader>
    <md-list-item ng-click="ul.openBlockProperty(item)" ng-show="$root.currentParcel.block != 0" class="secondary-button-padding md-3-line" ng-repeat="item in $root.currentParcel.block">
       <div class="md-list-item-text" layout="column">
        <p ng-show="item.full_address"><strong>{{(item.full_address)}} {{(item.unit != 0 ? 'Unit '+(item.unit | getUnit) : '')}}</strong></p>
        <p>{{(item.characteristics.description)}}</p>
        <p>{{"Last sold " + (item.sales_information.sales_date | cleandate)}} for <strong>${{item.sales_information.sales_price | number:2}}</strong></p>
        
       </div>
       <md-divider></md-divider>
      </md-list-item>
    </md-list>
    </md-tab>
      <md-tab ng-hide label="Community">

        <md-content>
          <div layout="column" layout-align="center center" layout-fill>
            <md-button disabled class="md-raised md-accent md-hue-2">
              <md-icon md-font-icon="icon-check_circle" ng-style="{'font-size':'24px'}" alt="more-options"></md-icon>
              Community Parcl
            </md-button>
          </div>
          <md-divider></md-divider>
          <md-tabs class="md-accent md-hue-2" md-dynamic-height label="NeighborhoodTabs">
          <md-tab label="411">
            <md-content class="md-padding">

              <h3 ng-show="$root.parclNews"class="title">{{$root.currentParcel.neighborhood.listname | uppercase}} News</h3>
              <md-divider ng-show="$root.parclNews"></md-divider>
              <md-card ng-repeat="item in $root.parclNews">
                <md-card-title>
                  <md-card-title-text>
                    <span class="md-headline" style="font-size: 18px;line-height:24px">{{item.title}}</span>
                  </md-card-title-text>
                </md-card-title>
                <md-card-content layout="row" layout-align="space-between">
                <div class="md-media-lg card-media">
                  <img ng-src="{{item.thumbnail}}" width="200" alt="Thumbnail">
                </div>
                </md-card-content>
                <md-card-actions layout="row" layout-align="end center">
                  <md-button ng-click="window.open(item.link, '_system')">View in Browser</md-button>
                </md-card-actions>
                
              </md-card>
              <h3 class="title">{{$root.currentCity | uppercase}} News</h3>
              <md-divider></md-divider>
              <md-card ng-repeat="item in $root.allNews">
                <md-card-title>
                  <md-card-title-text>
                    <span class="md-headline" style="font-size: 18px;line-height:24px">{{item.title}}</span>
                  </md-card-title-text>
                </md-card-title>
                <md-card-content layout="row" layout-align="space-between">
                <div class="md-media-lg card-media">
                  <img ng-src="{{item.thumbnail}}" width="200" alt="Thumbnail">
                </div>
                </md-card-content>
                <md-card-actions layout="row" layout-align="end center">
                  <md-button ng-click="window.open(item.link, '_system')">View in Browser</md-button>
                </md-card-actions>
                
              </md-card>
              
            </md-list>
            </md-content>
          </md-tab>
          <!-- <md-tab label="Comps">
            <md-content class="md-padding">
              <h1 class="title">Comps</h1>
              <md-divider></md-divider>
              <md-list flex>
              <md-list-item class="md-3-line" ng-hide="item.disable" ng-repeat="item in $root.currentParcel.neighborhood.comps" ng-click="show($event,item)">
                <div class="md-list-item-text" layout="column">
                  <h3 style="">{{item.violation_code_description}}</h3>
                  <h4>Location: {{item.violation_location}}</h4>
                  <p>Code: {{item.violation_status}}</p>
                </div>
                <md-divider></md-divider>
              </md-list-item>
              
            </md-list>
            </md-content>
          </md-tab> -->
          
          
        </md-tabs>
        </md-content>
      </md-tab>

      <md-tab ng-hide label="OPPS">

        <md-content class="md-padding">
          <!-- <h1 class="title">From the Web</h1> -->
          <p>Properties under contract by Parcl and its Partners</p>
          <md-divider></md-divider>
          <md-list flex>
              <md-list-item class="md-3-line" ng-hide="item.disable" ng-repeat="item in $root.parclprops" ng-click="show($event,item)">
                <div class="md-list-item-text" layout="column">
                  <h3 style="">{{item.address}}</h3>
                  <h4>{{item.zoning}}</h4>
                  <p>{{item.description}}</p>
                </div>
                <md-divider></md-divider>
              </md-list-item>
              
            </md-list>
        </md-content>
      </md-tab>


      </md-tabs>
    </div>
      <span flex-gt-sm="10"></span>
    </md-content>
  </div>
</md-content>
</div>
   